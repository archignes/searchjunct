<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SearchJunct</title>
    <link rel="icon" type="image/x-icon" href="/images/searchjunct.svg">

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        .special-action-button {
            margin: 0;
            padding: 0 1px;
            background-color: transparent;
            color: black;
            border: 1px solid black;
        }
    </style>
    
    <link href="style.css" rel="stylesheet">
</head>
<body>

    <!-- Using Bootstrap's container and flexbox utilities to center content -->
    <div class="container d-flex h-100 mt-3">
        <div class="row justify-content-center col-6 align-self-center mx-auto">
            <!-- Search form -->
            <div id="main-content" class="col-12">
                <form id="search-form" action="#" method="GET" onsubmit="return false;">
                    <div id="textarea-container" class="grow-wrap">
                        <textarea id="autoresizing-textarea" class="pr-4" rows="1" placeholder="Type your query here..."></textarea>
                        <i id="clear-textarea" class="bi bi-x"></i>
                        <img id="magnifying-glass" src="/images/searchjunct.svg" title="SearchJunct search button" alt="Search">
                    </div>
                    <input type="hidden" id="search-bar" name="query" class="form-control">
                </form>
                <div id="action-container" class="m-0 p-1 col-6 mx-auto rounded mt-1">
                    <button id="reshuffle-button" class="btn special-action-button" title="Reshuffle">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <button id="state-button" class="btn special-action-button" title="State">
                        <i class="bi bi-file-text"></i>
                    </button>
                    <button id="history-button" class="btn special-action-button" title="History">
                        <i class="bi bi-clock-history"></i>
                    </button>
                    <button id="shortcut-help-button" class="btn special-action-button" title="Shortcut help">
                        <i class="bi bi-slash-lg"></i>
                    </button>
                    <button id="privacy-button" class="btn special-action-button" title="Privacy help">
                        <i class="bi bi-shield"></i>
                    </button>
                    <button id="about-help-button" class="btn special-action-button" title="About & Guide">
                        <i class="bi bi-question-lg"></i>
                    </button>
                    <button id="tips-button" class="btn special-action-button" title="Tips & Hints">
                        <i class="bi bi-lightbulb"></i>
                    </button>

                </div>
                <div id="tips-popup" class="popup mt-1 border rounded p-1 py-3">
                    <h5 class="px-1 mx-1 py-0 my-0">Tips & Hints</h5>
                    <p class="p-1 mx-1 mt-0 mb-1">Maybe you're looking for something you've found before?</p>
                    <ul>
                        <li class="p-1 mx-1 mt-0 mb-1">History: <kbd>Cmd + Y</kbd> (start typing to search)</li>
                        <li class="p-1 mx-1 mt-0 mb-1">Bookmarks: <kbd>Option + Cmd + B</kbd></li>
                    </ul>
                    <p class="p-1 mx-1 mt-0 mb-1">For quick dictionary searches, maybe start with <kbd>Control + Command + D</kbd>.</p>

                </div>
                <div id="privacy-popup" class="popup mt-1 border rounded p-1 py-3">
                    <h5 class="px-1 mx-1 py-0 my-0">Privacy</h5>
                    <p class="p-1 mx-1 mt-0 mb-1">SearchJunct runs locally on your browser and only sends queries to the selected search engines when a search is initiated. It also saves your search history to an IndexedDB setup in your browser for your convenience. Please note that currently, history can only be deleted individually unless you are familiar with JavaScript or access the Developer Tools to do it yourself. This application is under active development, and future updates will include options to block certain search systems and to search and delete history in bulk.</p>
                    <h6 class="px-1 mx-1 py-0 my-0">Data Collection</h6>
                    <p class="p-1 mx-1 mt-0 mb-1">SearchJunct only collects data locally in your browser. This data is stored in an IndexedDB database called "SearchJunctDB".</p>
                    <h6 class="px-1 mx-1 py-0 my-0">Data Usage</h6>
                    <p class="p-1 mx-1 mt-0 mb-1">The collected data is used locally to enhance your user experience, such as remembering your search history. In the future, we may introduce an option to share anonymous usage data to help us improve SearchJunct.</p>
                    <h6 class="px-1 mx-1 py-0 my-0">Data Sharing</h6>
                    <p class="p-1 mx-1 mt-0 mb-1">Your data is stored locally on your device and is not shared with any third parties. When you initiate a search, your query is sent to the selected search engine, but no other information is shared.</p>
                    <h6 class="px-1 mx-1 py-0 my-0">Cookies</h6>
                    <p class="p-1 mx-1 mt-0 mb-1">SearchJunct currently does not use cookies. However, in the future, we may use cookies to remember your preferences and provide a more personalized experience.</p>
                    <h6 class="px-1 mx-1 py-0 my-0">User Control</h6>
                    <p class="p-1 mx-1 mt-0 mb-1">You have full control over your data. You can view, delete, or export your search history at any time. Please note that currently, history can only be deleted individually unless you are familiar with JavaScript or access the Developer Tools to do it yourself. Currently, export also requires such technical familiarity (please contact us for support).</p>
                    <h6 class="px-1 mx-1 py-0 my-0">Policy Updates</h6>
                    <p class="p-1 mx-1 mt-0 mb-1">We will notify you of any significant changes to this privacy policy. Please check this section regularly for updates.</p>
                </div>
                <div id="about-help-popup" class="popup mt-1 border rounded p-1 py-3">
                    <h5 class="px-1 mx-1 py-0 my-0">About</h5>
                    <p class="p-1 mx-1 mt-0 mb-1">SearchJunct is a single-page application designed to facilitate multi-engine search selection and routing. This tool serves as a speculative or exploratory design prototype, providing a platform for wondering, particularly around user interaction with multiple search engines and finding & supporting better tools and practices.</p>
                    <h5 class="px-1 mx-1 py-0 my-0">Usage</h5>
                    <p class="p-1 m-1">(1) Type a query into the <a href="#" onmouseover="document.getElementById('autoresizing-textarea').classList.add('flash-good'); setTimeout(() => document.getElementById('autoresizing-textarea').classList.remove('flash-good'), 500);" onclick="document.getElementById('autoresizing-textarea').focus(); document.getElementById('autoresizing-textarea').classList.add('flash-good'); setTimeout(() => document.getElementById('autoresizing-textarea').classList.remove('flash-good'), 500); return false;">search-bar</a>.
                    <br>(2) Then either hover over or click the <a href="#" onmouseover="document.getElementById('magnifying-glass').classList.add('flash-good'); setTimeout(() => document.getElementById('magnifying-glass').classList.remove('flash-good'), 500);" onclick="document.getElementById('magnifying-glass').classList.add('flash-good'); setTimeout(() => document.getElementById('magnifying-glass').classList.remove('flash-good'), 500); return false;">SearchJunct search button</a>, press <kbd>Enter</kbd>, or click a search system button to initiate a search.
                    <br>The query will be sent to the selected or next search system and search results will open in a new tab.<sup>*</sup>
                    </p>
                    <p class="p-1 mx-1 mt-0 mb-1">The <a href="#" onmouseover="document.getElementById('action-container').classList.add('flash-good'); setTimeout(() => document.getElementById('action-container').classList.remove('flash-good'), 500);" onclick="document.getElementById('action-container').classList.add('flash-good'); setTimeout(() => document.getElementById('action-container').classList.remove('flash-good'), 500); return false;">action container</a> includes special action buttons to: <b>Reshuffle</b> <button id="reshuffle-button" class="btn special-action-button" title="Reshuffle"><i class="bi bi-arrow-clockwise"></i></button> the order of the search system buttons, show the <b>State</b> <button id="state-button" class="btn special-action-button" title="State"><i class="bi bi-file-text"></i></button> with status labels on the right of the buttons, show the <b>History</b> <button id="history-button" class="btn special-action-button" title="History"><i class="bi bi-clock-history"></i></button>, show the <b>Shortcut help</b> <button id="shortcut-help-button" class="btn special-action-button" title="Shortcut help"><i class="bi bi-slash-lg"></i></button>, and show the <b>About help</b> <button id="about-help-button" class="btn special-action-button" title="About & Guide"><i class="bi bi-question-lg"></i></button></p>
                    <div class="px-3 p-1 m-1" style="font-size: 0.8em;">
                    <sup>*</sup>Note: The query for Andi will have to be manually pasted because it does not support search-by-URL.
                    </div>
                    <h5 class="px-1 mx-1 py-0 my-0">Team</h5>
                    <p class="p-1 mx-1 mt-0 mb-1">SearchJunct is actively developed by <a href="https://danielsgriffin.com" target="_blank">Daniel Griffin</a><sup>â†—</sup><br>You can email him <a href="mailto:daniel.griffin@berkeley.edu?subject=[SearchJunct]"><i class="bi bi-envelope-fill"></i></a> with any questions, suggestions, or concerns or start an issue on <a href="https://github.com/danielsgriffin/searchjunct/issues/new"><i class="bi bi-github"></i> Github</a></p>
                </div>
                <div id="shortcut-help-popup" class="popup mt-1 border rounded p-1 py-3">
                    <p class="p-1 m-1">
                        You can use <kbd>Tab</kbd> and <kbd>Enter</kbd> to jump to the next <code>special-action-button</code> and <code>search-system-button</code> and interact with it.
                    </p><p class="p-1 m-1">
                        Using this tool may require switching often between tabs (as the links open in new tabs by default). 
                        You can switch between tabs with <kbd>Cmd+Option</kbd> and left/right arrows. Or you can use <kbd>Cmd+Shift+A</kbd>. 
                        </p>
                        <div class="px-3 p-1 m-1"style="font-size: 0.8em;">
                            Note: The tabs for SearchJunct will be labeled by the query, with square bracket notation: [search query]. 
                            As this is rare you can likely simply type an opening bracket (<kbd>[</kbd>) to find all the SearchJunct tabs.
                        </div>
                </div>
                <div id="history-container" class="mt-1 p-1 py-3">
                    <button id="close-history" class="btn btn-secondary" title="Close History">
                        <i class="bi bi-x"></i>
                    </button>
                    <h4 class="text-center">Search History</h4>
                    <button id="download-history" class="btn btn-secondary" title="Download History">
                        <i class="bi bi-download"></i>
                    </button>
                </div>
                <!-- Search system options -->
                <div id="search-systems-container" class="mt-1">
                    <!-- Search system buttons will be added here dynamically -->
                </div>
            </div>
        </div>
    </div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script src="searchSystems.js"></script> <!-- Load search systems first -->
<script type="module" src="main.js"></script>
</body>
</html>
